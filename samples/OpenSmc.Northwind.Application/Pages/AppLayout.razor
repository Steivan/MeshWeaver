@page "/app/{Application}/{Environment}/{Area}/{Id?}"
@inject NavigationManager NavigationManager
@using OpenSmc.Application;
@using OpenSmc.Layout;
@using Microsoft.AspNetCore.WebUtilities
@using Microsoft.Extensions.Primitives
@using OpenSmc.Utils

<PageTitle>@PageTitle</PageTitle>

<LayoutArea Address="@Address" Reference="@Reference" Id="@Id"/>

@code{
    [Parameter]
    public string Application { get; set; }
    [Parameter]
    public string Environment { get; set; }
    [Parameter]
    public string Area { get; set; }
    [Parameter] 
    public string Id { get; set; }

    private string PageTitle => $"{Area.Wordify()} - {Application}";

    public Dictionary<string, StringValues> Options => 
        QueryHelpers.ParseQuery(NavigationManager.ToAbsoluteUri(NavigationManager.Uri).Query);

    private object Address => new ApplicationAddress(Application, Environment);

    private LayoutAreaReference Reference => new(Area)
    {
        Options = Options,
    };
}