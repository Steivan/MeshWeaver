@using Json.More
@using Json.Pointer
@inherits BlazorView<SelectControl>

<FluentSelect Label="@ViewModel.Label.ToString()"
              Items="@Items"
              OptionText="@GetOptionText"
              @bind-SelectedOption="@SelectedOption"
/>

@code
{
    private IEnumerable<object> Items => ViewModel.Elements.Cast<object>();

    public string GetOptionText(object item) => 
        JsonPointer.Parse(ViewModel.OptionText)
            .Evaluate(item.ToJsonDocument().RootElement)?.GetString();

    // TODO V10: bind to "data" property (11.06.2024, Alexander Kravets)
    private object SelectedOption { get; set; }
}