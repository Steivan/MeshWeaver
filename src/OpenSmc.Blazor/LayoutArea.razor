@using System.Text.Json
@using OpenSmc.Data.Serialization
@using HorizontalAlignment = Microsoft.FluentUI.AspNetCore.Components.HorizontalAlignment
@using Orientation = Microsoft.FluentUI.AspNetCore.Components.Orientation
@using VerticalAlignment = Microsoft.FluentUI.AspNetCore.Components.VerticalAlignment
@if (RootControl == null)
{
    <FluentStack HorizontalAlignment="HorizontalAlignment.Center" VerticalAlignment="VerticalAlignment.Center" Orientation="Orientation.Vertical">
        <h3>Loading @Reference.Area</h3>
        <FluentProgressRing style="width: 102px; height: 102px;"/>
    </FluentStack>
}
else
{
    <DispatchView ViewModel="@RootControl" Stream="@Stream" Area="@Reference.Area"/>
}

@code{

    [Parameter]
    public object Address { get; set; }

    [Parameter]
    public LayoutAreaReference Reference { get; set; }

    private UiControl RootControl { get; set; } = null;

    [Parameter]
    public ISynchronizationStream<JsonElement, LayoutAreaReference> Stream { get; set; }

}
