@using Icon = MeshWeaver.Application.Styles.Icon
@using Appearance = Microsoft.FluentUI.AspNetCore.Components.Appearance
@inherits BlazorView<ButtonControl>

<FluentButton
    Appearance="@Appearance"
    OnClick="@OnClick"
    IconStart="@IconStart?.ToFluentIcon()"
    IconEnd="@IconEnd?.ToFluentIcon()"
    Disabled="@Disabled"
    >
    @Title
</FluentButton>
    
@code
{
    private string Title { get; set; }
    private Icon IconStart { get; set; }
    private Icon IconEnd { get; set; }
    private bool Disabled { get; set; }

    protected override void BindData()
    {
        base.BindData();
        if (ViewModel != null)
        {
            DataBind<string>(ViewModel.Data, x => Title = x);
            DataBind<Icon>(ViewModel.IconStart, x => IconStart = x);
            DataBind<Icon>(ViewModel.IconEnd, x => IconEnd = x);
            DataBind<bool?>(ViewModel.Disabled, x => Disabled = x.HasValue && x.Value);
        }
    }

    private Appearance Appearance => ViewModel.Appearance 
        switch
        {
            Layout.Appearance.Neutral => Appearance.Neutral,
            Layout.Appearance.Accent => Appearance.Accent,
            Layout.Appearance.Lightweight => Appearance.Lightweight,
            Layout.Appearance.Outline => Appearance.Outline,
            Layout.Appearance.Stealth => Appearance.Stealth,
            Layout.Appearance.Filled => Appearance.Filled,
            _ => Appearance.Neutral
        };
}