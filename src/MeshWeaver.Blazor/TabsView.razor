@using Orientation = Microsoft.FluentUI.AspNetCore.Components.Orientation
@inherits BlazorView<TabsControl, TabsView>

<FluentTabs ActiveTabId="@ActiveTabId" Height="@Height" Orientation="@Orientation">
    @foreach (var area in ViewModel.Areas)
    {
        <DispatchView ViewModel="@area" Stream="@Stream" IsVisible="@IsActive(area)" />
    }
</FluentTabs>

@code
{
    private string ActiveTabId { get; set; }
    private string Height { get; set; }

    private Orientation Orientation { get; set; }
    protected override void BindData()
    {
        base.BindData();
        if(ActiveTabId != null)
           DataBindProperty(ViewModel.ActiveTabId, x => x.ActiveTabId);
        else 
            ActiveTabId = ViewModel.Areas.First().Id.ToString();
        DataBindProperty(ViewModel.Height, x => x.Height);
        DataBindProperty(ViewModel.Orientation, x => x.Orientation);
    }

    private bool IsActive(NamedAreaControl area)
    {
        return Equals(ActiveTabId, area.Id);
    }
}
